<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Wialon JS example</title>
	<link rel="stylesheet" href="">

	<script src="../../dist/wialon-src.js"></script>
</head>
<body>
	<script>
		// enable debug messages
		W.debug = true;
		
		const CREDENTIALS = [
			{
				title: 'SIG',
				url: 'https://hst-api.wialon.com',
				token: '53c9dd80996321a24d51dfdeeb92ab11A1B816D29B0463721640689B8DB10FB665990C0F',
			},
			{
				title: 'MSK',
				url: 'https://hst-api.wialon.ru',
				token: 'd3b80ed0ff84a3bb1452197866834cb2E8E16779EB57F610F841D8F66F9D082AAFA44370',
			},
			{
				title: 'USA',
				url: 'https://hst-api.wialon.us',
				token: 'fb6710da5cc53425926070b3447e0f2a4160D9790C046CA0F2DD1DC219BEFCA7B96D948F',
			}
		]

		function login(index) {
			const DC = CREDENTIALS[index]
			
			console.log(DC.title)

			// init wialon session
			DC.sess = new W.Session(DC.url, {
				eventsTimeout: 60
			});

			DC.sess.execute('token/login', {token: DC.token}, function(data) {
				
				console.log(DC.title, 'geocode', '|', data.gis_geocode, '|', DC.sess.getBaseGisUrl('geocode'));
				console.log(DC.title, 'render', '|', data.gis_render, '|', DC.sess.getBaseGisUrl('render'));
				console.log(DC.title, 'routing', '|', data.gis_routing, '|', DC.sess.getBaseGisUrl('routing'));
				console.log(DC.title, 'search', '|', data.gis_search, '|', DC.sess.getBaseGisUrl('search'));

				DC.sess.getLocations({coords:[{
					"lon":27.516643322771575,
					"lat":53.91069937030936
				}]}, true, function(data) {
					console.log(data)
				})

			})

			if (index < CREDENTIALS.length - 1) {
				login(index + 1)
			}
		}

		login(0);
	</script>
</body>
</html>
